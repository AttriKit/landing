---
---

<header class="header">
  <nav class="nav container">
    <a href="/" class="nav-brand">
      <img src="/logo_banner.svg" alt="AttriKit" class="logo" width="120" height="32" />
    </a>
    <ul class="nav-menu" id="nav-menu">
      <li><a href="/docs/">文档</a></li>
      <li><a href="/blog/">博客</a></li>
      <li><a href="/#features">产品功能</a></li>
      <li><a href="/#comparison">对比优势</a></li>
      <li><a href="/#pricing">价格方案</a></li>
      <li><a href="/#faq">常见问题</a></li>
      <li class="nav-cta-group">
        <button class="btn btn-secondary btn-sm" data-open-demo-modal>体验 Demo</button>
        <button class="btn btn-primary btn-sm" data-open-modal>立即咨询</button>
      </li>
    </ul>
    <button class="nav-toggle" aria-label="Toggle menu" aria-expanded="false" aria-controls="nav-menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </nav>
</header>

<style>
  .header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: var(--header-height);
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-bottom: 1px solid var(--color-border);
    z-index: var(--z-fixed);
    transition: background 300ms ease;
  }

  .header.scrolled {
    background: rgba(255, 255, 255, 0.9);
  }

  .nav {
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .nav-brand {
    display: flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
  }

  .logo {
    height: 32px;
    width: auto;
  }

  .brand-name {
    font-size: var(--font-size-base);
    font-weight: 700;
    font-family: var(--font-family-display);
    color: var(--color-text-primary);
    letter-spacing: -0.01em;
    line-height: 1;
  }

  .nav-menu {
    display: flex;
    align-items: center;
    gap: var(--spacing-10);
    list-style: none;
  }

  .nav-menu a {
    color: var(--color-text-muted);
    font-weight: 500;
    font-size: var(--font-size-sm);
    transition: color 200ms ease;
  }

  .nav-menu a:hover {
    color: var(--color-accent-primary);
  }

  .nav-menu a:focus-visible {
    outline: 2px solid var(--color-accent-primary);
    outline-offset: 2px;
    border-radius: 2px;
  }

  .nav-cta-group {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
  }

  .nav-cta-group .btn {
    height: 32px;
  }

  .nav-cta-group .btn-primary {
    border: 1.5px solid var(--color-accent-primary);
  }

  .nav-cta-group .btn-secondary {
    height: 34px;
  }

  .nav-toggle {
    display: none;
    flex-direction: column;
    gap: 4px;
    background: none;
    border: none;
    cursor: pointer;
    padding: var(--spacing-2);
  }

  .nav-toggle span {
    width: 24px;
    height: 1.5px;
    background: var(--color-text-primary);
    border-radius: 2px;
    transition: transform 300ms ease, opacity 300ms ease;
  }

  .nav-toggle:focus-visible {
    outline: 2px solid var(--color-accent-primary);
    outline-offset: 2px;
    border-radius: 4px;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .nav-menu {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      flex-direction: column;
      align-items: stretch;
      gap: 0;
      padding: var(--spacing-4) 0;
      border-top: 1px solid var(--color-border);
      box-shadow: var(--shadow-lg);

      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: opacity var(--transition-base),
                  visibility var(--transition-base),
                  transform var(--transition-base);
    }

    .nav-menu.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
      display: flex;
    }

    .nav-menu li {
      padding: 0 var(--spacing-6);
    }

    .nav-menu a {
      display: block;
      padding: var(--spacing-3) 0;
      width: 100%;
      text-align: left;
    }

    /* Keep button styling in mobile menu */
    .nav-menu button {
      margin: var(--spacing-3) var(--spacing-6);
      width: calc(100% - var(--spacing-12));
      text-align: center;
    }

    /* Button group in mobile menu */
    .nav-cta-group {
      flex-direction: column;
      gap: var(--spacing-2);
      padding: 0;
      margin: var(--spacing-3) 0;
    }

    .nav-cta-group button {
      margin: 0;
      width: 100%;
    }

    .nav-toggle {
      display: flex;
    }

    .nav-toggle span {
      transition: transform var(--transition-base), opacity var(--transition-base);
      transform-origin: center;
    }

    .nav-toggle.active span:nth-child(1) {
      transform: translateY(5px) rotate(45deg);
    }

    .nav-toggle.active span:nth-child(2) {
      opacity: 0;
    }

    .nav-toggle.active span:nth-child(3) {
      transform: translateY(-5px) rotate(-45deg);
    }
  }
</style>

<script>
  // Header scroll effect
  const header = document.querySelector<HTMLElement>('.header');
  let lastScroll = 0;

  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;

    if (currentScroll > 100 && header) {
      header.classList.add('scrolled');
    } else if (header) {
      header.classList.remove('scrolled');
    }

    lastScroll = currentScroll;
  });

  // Mobile menu toggle
  const navToggle = document.querySelector<HTMLButtonElement>('.nav-toggle');
  const navMenu = document.querySelector<HTMLElement>('.nav-menu');

  // Helper function to update aria-expanded
  const updateAriaExpanded = (isOpen: boolean) => {
    if (navToggle) {
      navToggle.setAttribute('aria-expanded', isOpen.toString());
    }
  };

  if (navToggle && navMenu) {
    // Toggle menu on button click
    navToggle.addEventListener('click', () => {
      const isActive = navToggle.classList.contains('active');
      navToggle.classList.toggle('active');
      navMenu.classList.toggle('active');

      // Update aria-expanded
      updateAriaExpanded(!isActive);

      // Prevent body scroll when menu is open
      if (!isActive) {
        document.body.style.overflow = 'hidden';
      } else {
        document.body.style.overflow = '';
      }
    });

    // Close menu on link click
    navMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        navToggle.classList.remove('active');
        navMenu.classList.remove('active');
        updateAriaExpanded(false);
        document.body.style.overflow = '';
      });
    });

    // Close menu on button click (for "立即咨询" button)
    navMenu.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        navToggle.classList.remove('active');
        navMenu.classList.remove('active');
        updateAriaExpanded(false);
        document.body.style.overflow = '';
      });
    });

    // Close menu on ESC key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && navMenu.classList.contains('active')) {
        navToggle.classList.remove('active');
        navMenu.classList.remove('active');
        updateAriaExpanded(false);
        document.body.style.overflow = '';
        // Return focus to toggle button
        navToggle.focus();
      }
    });

    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
      const target = e.target as Node;
      if (!navToggle.contains(target) && !navMenu.contains(target)) {
        if (navMenu.classList.contains('active')) {
          navToggle.classList.remove('active');
          navMenu.classList.remove('active');
          updateAriaExpanded(false);
          document.body.style.overflow = '';
        }
      }
    });
  }
</script>
